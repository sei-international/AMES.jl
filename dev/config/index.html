<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration file · LEAP-Macro</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LEAP-Macro</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../quickstart/">Quickstart</a></li></ul></li><li><span class="tocitem">Model overview</span><ul><li><a class="tocitem" href="../leap-macro-link/">LEAP-Macro link</a></li><li class="is-active"><a class="tocitem" href>Configuration file</a><ul class="internal"><li><a class="tocitem" href="#High-level-settings"><span>High-level settings</span></a></li><li><a class="tocitem" href="#Linking-to-the-supply-use-table"><span>Linking to the supply-use table</span></a></li><li><a class="tocitem" href="#Linking-Macro-to-LEAP"><span>Linking Macro to LEAP</span></a></li></ul></li><li><a class="tocitem" href="../model-outputs/">Output files</a></li><li><a class="tocitem" href="../demand-led-growth/">About demand-led growth</a></li><li><a class="tocitem" href="../limitations/">Limitations of the model</a></li></ul></li><li><span class="tocitem">Model detail</span><ul><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../lgp/">Linear goal program</a></li><li><a class="tocitem" href="../dynamics/">Dynamics</a></li></ul></li><li><span class="tocitem">Building a model</span><ul><li><a class="tocitem" href="../prep-sut/">Preparing supply-use tables</a></li><li><a class="tocitem" href="../prep-params/">Preparing exogenous parameters</a></li><li><a class="tocitem" href="../prep-config/">Preparing the configuration file</a></li><li><a class="tocitem" href="../calib/">Calibrating the model</a></li><li><a class="tocitem" href="../troubleshoot/">Troubleshooting</a></li><li><a class="tocitem" href="../link-to-leap/">Linking to LEAP</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model overview</a></li><li class="is-active"><a href>Configuration file</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration file</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sei-international/LEAPMacro/blob/master/docs/src/config.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="config"><a class="docs-heading-anchor" href="#config">Configuration file</a><a id="config-1"></a><a class="docs-heading-anchor-permalink" href="#config" title="Permalink"></a></h1><p>The configuration file is written in YAML syntax and has a <code>.yml</code> extension. By default, Macro assumes the configuration file will be called <code>LEAPMacro_params.yml</code>, but other names are possible, and in fact encouraged, because each configuration file corresponds to a different scenario.</p><p>The configuration file is made up of several blocks. This overview will cover a few of them. More detail is available in the page on <a href="../prep-config/#prep-config">preparing a configuration file</a>.</p><h2 id="High-level-settings"><a class="docs-heading-anchor" href="#High-level-settings">High-level settings</a><a id="High-level-settings-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-settings" title="Permalink"></a></h2><p>The first block names a subfolder for storing outputs. It will be created inside an <code>outputs</code> folder. Different configuration files should be given different output folders so that different scenarios can be distinguished.</p><pre><code class="language-yaml hljs">#---------------------------------------------------------------------------
# Folder inside the &quot;outputs&quot; folder to store calibration, results, and diagnostics
#---------------------------------------------------------------------------
output_folder: DEFAULT</code></pre><p>The next block specifies the input files. In many cases, these will be the same across a set of scenarios. However, it is possible that they might differ. For example, the supply-use table, given by the <code>SUT</code> parameter, could be drawn from different years for calibration purposes, and different <code>time_series</code> might distinguish different scenarios.</p><pre><code class="language-yaml hljs">#---------------------------------------------------------------------------
# Supply-use table and supplementary tables as CSV files
#---------------------------------------------------------------------------
# Macro model data files
files:
    SUT: Freedonia_SUT.csv
    sector_info: sector_parameters.csv
    product_info: product_parameters.csv
    time_series: time_series.csv</code></pre><p>The following block says how to manage the output folders. Reporting diagnostics is optional. It is highly recommended while developing a model, but <code>report-diagnostics</code> can be set to <code>false</code> for a model in active use. Ordinarily it is useful to clear the folders with each run, since files will be overwritten. Sometimes during model development it is useful set <code>clear-folders</code> to <code>false</code> temporarily. Output files from one run can be renamed, so they are not overwritten in a subsequent run and the results compared.</p><pre><code class="language-yaml hljs"># Say whether to clear the contents of the results, calibration, and diagnostic folders before the run
clear-folders:
    results: true
    calibration: true
    diagnostics: true
# Set to &quot;true&quot; to send results to the diagnostics folder, including dumps of the linear goal program
report-diagnostics: true</code></pre><p>The next block sets the start and end years for the simulation. These should normally be the same as the base year and final year in LEAP, and the start year should be appropriate for the supply-use table. However, during model development, the start year might be set to an earlier value to calibrate against historical data. Also, the end year can be set closer to the start year, but Macro normally runs quickly, so that is rarely necessary for performance.</p><pre><code class="language-yaml hljs">#---------------------------------------------------------------------------
# Start and end years for the simulation
#   Note: the supply-use table above must be appropriate for the start year
#---------------------------------------------------------------------------
years:
    start:  2010
    end:    2040</code></pre><h2 id="Linking-to-the-supply-use-table"><a class="docs-heading-anchor" href="#Linking-to-the-supply-use-table">Linking to the supply-use table</a><a id="Linking-to-the-supply-use-table-1"></a><a class="docs-heading-anchor-permalink" href="#Linking-to-the-supply-use-table" title="Permalink"></a></h2><p>The following several blocks contain technical parameters. These are described in more detail in the page on <a href="../prep-config/#prep-config">preparing a configuration file</a>.</p><p>Farther down the table is the block for specifying the structure of the supply-use table and how it relates to Macro.</p><p>The first section of this block specifies sectors and products that are excluded from the simulation. There are three categories:</p><ol><li>First, and most important, are energy sectors and products. Those are excluded from the Macro calculation because the energy sector analysis is handled on a physical basis within LEAP.</li><li>Second are any territorial adjustments. Macro recalculates some parameters to take account of those entries. If none are present in the supply-use table, then an empty list <code>[]</code> can be entered for this parameter, as in the sample Freedonia model.</li><li>Finally are any other excluded sectors and products. For example, some tables may have a &quot;fictitious&quot; product or sector entry.</li></ol><pre><code class="language-yaml hljs">#---------------------------------------------------------------------------
# Structure of the supply-use table
#---------------------------------------------------------------------------
# NOTE: Both supply and use tables must have sectors labeling columns and products labeling rows
excluded_sectors:
    energy: [coal, petr, util]
    territorial_adjustment: []
    others: []

excluded_products:
    energy: [coal, petr, util]
    territorial_adjustment: []
    others: []</code></pre><p>Following that is a list of non-tradeable products and a domestic production share threshold. Imports and exports of products declared non-tradeable are maintained at zero within the Macro model. Furthermore, their prices are determined endogenously by the Macro model.</p><p>Other products may be almost entirely imported. That can sometimes cause difficulties. If the domestic share of the total of imports and domestic production falls below the threshold specified in the configuration file, then the corresponding sector is excluded during the simulation.</p><pre><code class="language-yaml hljs">non_tradeable_products: [constr, comm]

# Domestic production as a % share of the total of imports and domestic production must exceed this value
domestic_production_share_threshold: 1 # percent</code></pre><p>The following section specifies where to find the data needed by Macro within the supply-use table (a <code>CSV</code> file). Ranges are specified in standard spreadsheet form.</p><pre><code class="language-yaml hljs">SUT_ranges:
    # Matrices arranged product (rows) x sector (columns)
    supply_table: J3:W16
    use_table: J21:W34
    # Columns indexed by products -- groups of columns will be summed together
    tot_supply: I3:I16
    margins: D3:E16
    taxes: F3:H16
    imports: Y3:Y16
    exports: Y21:Y34
    final_demand: Z21:AB34
    investment: AC21:AC34
    stock_change: AD21:AD34
    tot_intermediate_supply: X21:X34
    # Rows indexed by sector -- groups of rows will be summed together
    tot_intermediate_demand: J35:W35
    wages: J37:W38</code></pre><h2 id="Linking-Macro-to-LEAP"><a class="docs-heading-anchor" href="#Linking-Macro-to-LEAP">Linking Macro to LEAP</a><a id="Linking-Macro-to-LEAP-1"></a><a class="docs-heading-anchor-permalink" href="#Linking-Macro-to-LEAP" title="Permalink"></a></h2><p>The next, and final, block specifies how LEAP and Macro are linked.</p><p>The first section says which LEAP scenario to use for inputs to the Macro model, the LEAP scenario to which Macro returns its results, and currency unit for investment costs, and a scaling factor. For example, if entries in the Macro model input files are in millions of US dollars, and investment costs are reported in US dollars, then the scaling factor is one million (1000000 or 1.0e+6).</p><pre><code class="language-yaml hljs">#---------------------------------------------------------------------------
# Parameters for running LEAP with the Macro model (LEAP-Macro)
#---------------------------------------------------------------------------
LEAP-info:
    # This can be, e.g., a baseline scenario
    input_scenario: Baseline
    # This is the scenario from which LEAP results are drawn
    result_scenario: Baseline
    # Currency units for investment costs
    inv_costs_unit: U.S. Dollar
    # Scaling factor for investment costs (values are divided by this number, e.g., for thousands use 1000 or 1.0e+3)
    inv_costs_scale: 1.0e+6</code></pre><p>The remaining sections specify where in LEAP to put indices as calculated by Macro. The indices start at 1 in the <code>start</code> year specified earlier in the configuration file.</p><p>The first index, which is optional, is for GDP. It gives the name for the index to be reported in an <code>indices</code> output file. Then, it gives the LEAP branch and variable where the index should be inserted and, to cover cases where the last historical year is after the base year, the last historical year.</p><pre><code class="language-yaml hljs"># Association between LEAP and supply-use sectors
GDP-branch:
    name: GDP
    branch: Key\GDP
    variable: Activity Level
    last_historical_year: 2010</code></pre><p>The second index, for employment, is also optional. It has the same structure as for GDP.</p><pre><code class="language-yaml hljs">Employment-branch:
    name: Employment
    branch: Key\Employment
    variable: Activity Level
    last_historical_year: 2010</code></pre><p>Finally, the <code>LEAP-sectors</code> parameter contains a list of indices. For each of these, Macro will sum up sector production across all of the sector codes listed. It will then calculate an index starting in the base year, and insert the index into the specified branches. In some cases, the same index might be applied to different branches. For example, if the supply-use table has a &quot;services&quot; sector but no transport, while LEAP has both a services and a commercial transport sector, the same index could be used to drive both.</p><p>While the GDP and Employment entries can be omitted from the file if they are not needed, to exclude the <code>LEAP-sectors</code> entry, simply set it to an empty list: <code>LEAP-sectors: []</code>.</p><pre><code class="language-yaml hljs">LEAP-sectors:
 - {
    name: Iron and Steel,
    codes: [ironstl],
    branches: [
        {
         branch: Demand\Industry\Iron and Steel,
         variable: Activity Level,
         last_historical_year: 2010
        }
    ]
   }
 - {
    name: Other Industry,
    codes: [foodpr, hvymach, othind],
    branches: [
        {
         branch: Demand\Industry\Other Industry,
         variable: Activity Level,
         last_historical_year: 2010
        }
    ]
   }
   ...</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../leap-macro-link/">« LEAP-Macro link</a><a class="docs-footer-nextpage" href="../model-outputs/">Output files »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Monday 28 March 2022 16:04">Monday 28 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
